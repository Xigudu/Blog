<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <link rel="stylesheet" th:href="@{/lib/layui-v2.6.3/css/layui.css}" media="all">
    <link rel="stylesheet" th:href="@{/css/public.css}" media="all">
    <link rel="stylesheet" th:href="@{/lib/editor/css/editormd.css}"/>
</head>
<body>
<div class="layuimini-container">
    <div class="layuimini-main">
        <div id="layout">
            <form id="form-search" class="layui-form layui-form-pane" action="">
                <div class="layui-row layui-col-space10">
                    <div class="layui-col-md8">
                        <div class="grid-demo grid-demo-bg1">
                            <div id="md-content" style="margin-top: 10px">
                                <textarea style="display:none"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="layui-col-md4" style="margin-top: 10px">
                        <div class="layui-card">
                            <div class="layui-card-header">撰写博客</div>
                            <div class="layui-card-body">
                                <div style="margin: 2px 10px 10px 10px">
                                    <div class="layui-form-item">
                                        <div class="layui-inline">
                                            <label class="layui-form-label">文章标题</label>
                                            <div class="layui-input-inline">
                                                <input style="border-radius: 5px;" type="text" id="title" name="articleTitle" lay-verify="title" placeholder="请输入标题" autocomplete="off" class="layui-input" value="">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">文章标签</label>
                                        <div class="layui-input-block" th:each="tags:${tag}">
                                            <input type="checkbox" name="like[write]" th:title="${tags.tagName}" th:value="${tags.id}">
                                        </div>
                                    </div>
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">文章分类</label>
                                        <div class="layui-input-inline" >
                                            <select name="colId"  lay-search="">
                                                <option value="">请选择分类</option>
                                                <option th:each="cat:${list}" th:text="${cat.categoryName}" th:value="${cat.id}">请选择类型</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">文章类型</label>
                                        <div class="layui-input-inline">
                                            <select name="colId"  lay-search="">
                                                <option value="">请选择类型</option>
                                                <option value="1">原创</option>
                                                <option value="2">转载</option>
                                                <option value="3">翻译</option>
                                            </select>
                                        </div>
                                    </div>
                                    <label class="layui-form-label">上传封面</label>
                                    <div class="layui-upload-drag" id="imp">
                                        <i class="layui-icon"></i>
                                        <p>点击上传，或将文件拖拽到此处</p>
                                        <div class="layui-hide" id="upload">
                                            <hr>
                                            <img src="" alt="上传成功后渲染" style="max-width: 196px">
                                        </div>
                                    </div>
                                    <div class="layui-form-item" style="margin-top: 20px">
                                        <label class="layui-form-label">置顶</label>
                                        <div class="layui-input-block" id="isTop">
                                            <input type="checkbox" name="switch" lay-skin="switch" lay-text="ON|OFF">
                                        </div>
                                    </div>
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">推荐</label>
                                        <div class="layui-input-block">
                                            <input type="checkbox" name="switch" lay-skin="switch" lay-text="ON|OFF">
                                        </div>
                                    </div>
                                    <div class="layui-form-item">
                                        <div class="layui-inline">
                                            <button style="border-radius: 30px;margin-left: 10px" class="layui-btn layui-btn-primary layui-border-red" lay-submit lay-filter="keep">保存草稿</button>
                                            <button style="border-radius: 30px" type="button" class="layui-btn layui-btn-danger" lay-submit lay-filter="post">发布文章</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<script th:src="@{/lib/jquery-3.4.1/jquery-3.4.1.min.js}"></script>
<script th:src="@{/lib/editor/editormd.js}"></script>
<script th:src="@{/lib/layui-v2.6.3/layui.js}" charset="utf-8"></script>
<script th:src="@{/js/lay-config.js}" charset="utf-8"></script>
<script type="text/javascript">
    layui.use(['form','layer'], function () {
        var $ = layui.jquery,
            form = layui.form,
            layer = layui.layer

        var testEditor;

        $(function () {
            testEditor = editormd("md-content", {
                width: "100%",
                height: 640,
                syncScrolling: "single",
                path: "/lib/editor/lib/",
                toolbarIcons: ["undo", "redo", "|", "bold", "del", "italic", "quote", "|", "h1", "h2", "h3", "h4", "h5", "h6", "|",
                    "list-ul", "list-ol", "hr", "|", "link", "image", "code", "code-block",
                    "table", "emoji", "search", "|", "watch", "preview"],
                imageUpload: true,
                imageFormats: ["jpg", "jpeg", "gif", "png", "bmp", "webp"],
                imageUploadURL: "/admin/upload",
                toolbarAutoFixed: false,
            });

        });
        form.verify({
            title: function (value) {
                if (value.length == 0) {
                    return '文章标题不能为空'
                }
            }
        })

        form.on('submit(post)', function (data) {
            data = data.field
            console.log(data)
        })
    });
</script>
</body>
</html>